<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN">
<html>
  <head>
    <meta http-equiv="Content-type" content="text/html;charset=UTF-8">
    <title>Smalltalk76/Windows.st</title>
  </head>
  <body>
    <div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: 10pt serif">&rsquo;From Smalltalk 5.5k XM November 24 on 5 February 2037 at 10:56:19 pm.&rsquo;<br></span></div>
<div style="width: 141pt; margin-left: 425pt; margin-top: 0pt; text-align: left">
<span style="font: bold 12pt serif">"FontWindow"</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 12pt serif">Class new title: &rsquo;FontWindow&rsquo;<br></span><span class="tab" val="79"></span><span style="font: bold 12pt serif">subclassof: Object<br></span><span class="tab" val="79"></span><span style="font: bold 12pt serif">fields: &rsquo;frame font fontht fontraster fontxtabl bitsetter char charx charwid charstr altostyle fontnumber clearframe scale boxer&rsquo;<br></span><span class="tab" val="79"></span><span style="font: bold 12pt serif">declare: &rsquo;fontmenu &rsquo;;<br></span><span class="tab" val="79"></span><span style="font: bold 12pt serif">asFollows</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: italic 10pt serif"><br>I am a window that displays one blown up character at a time of a strike-format font</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 12pt serif"><br>Help</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 10pt serif">help<br></span><span style="font: 10pt serif">[</span><span style="font: italic 10pt serif">"<br>**sysFontWindow is declared in the Smalltalk dictionary, and bound to the font window displayed on the screen of most system releases -- intended to provide an easy way to play around with the font editor.<br>**to create a window for editing default font 0 at middle-click:<br></span><span class="tab" val="79"></span><span style="font: italic 10pt serif"> user schedule: (sysFontWindow &larr; FontWindow new<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: italic 10pt serif">altostyle: DefaultTextStyle<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: italic 10pt serif">fontnumber: 1<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: italic 10pt serif">at: (OriginCursor showwhile⦂<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: italic 10pt serif">[user waitbug ⇒[user mp]])).<br>**to create a new font<br></span><span class="tab" val="79"></span><span style="font: italic 10pt serif">yourfont &larr; FontWindow new newfont: 16 maxcharwidth: 16 min: 0<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: italic 10pt serif">max: 177 ascent: 12 kern: 0.<br><br>**to edit newly created font<br></span><span class="tab" val="79"></span><span style="font: italic 10pt serif">yourtextstyle setfont: n name: yourfont.</span><span class="tab" val="79"></span><span style="font: italic 10pt serif">**insert it into a TextStyle<br></span><span class="tab" val="79"></span><span style="font: italic 10pt serif">**now create a window as above with yourtextstyle and appropriate<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: italic 10pt serif">fontnumber<br></span><span class="tab" val="79"></span><span style="font: italic 10pt serif"><br><br>**examples of manual manipulation of yourfontwindow:<br></span><span class="tab" val="79"></span><span style="font: italic 10pt serif">sysFontWindow setascent: 2.</span><span class="tab" val="79"></span><span style="font: italic 10pt serif">**Deltas -- for entire font**<br></span><span class="tab" val="79"></span><span style="font: italic 10pt serif">sysFontWindow setascent: ¬3.<br></span><span class="tab" val="79"></span><span style="font: italic 10pt serif">sysFontWindow setdescent: 2.<br></span><span class="tab" val="79"></span><span style="font: italic 10pt serif">sysFontWindow setdescent: ¬2.<br></span><span class="tab" val="79"></span><span style="font: italic 10pt serif">sysFontWindow setchar: 046.<br></span><span class="tab" val="79"></span><span style="font: italic 10pt serif">sysFontWindow setwidth: 5.</span><span class="tab" val="79"></span><span style="font: italic 10pt serif">**Absolute--for char in window. <br></span><span class="tab" val="79"></span><span style="font: italic 10pt serif">Useful for characters of zero width.**<br>"</span><span style="font: 10pt serif">]</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 12pt serif"><br>Initialization</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 10pt serif">altostyle: altostyle fontnumber: fontnumber at: origin<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">[</span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: italic 10pt serif">"set up an instance"</span><span style="font: 10pt serif"><br></span><span class="tab" val="79"></span><span style="font: 10pt serif">[fontmenu≡nil⇒[self init]].<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">scale &larr; 9. charstr &larr; String new: 1. char &larr; 65. charstr◦1 &larr; char.<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">bitsetter &larr; BitBlt init.<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">boxer &larr; Rectangle new<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">origin: 0 ⌾ 0 extent: (scale-1) ⌾ (scale-1).<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">frame &larr; Rectangle  new origin: origin  extent:  scale ⌾ 0.<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">clearframe &larr; Rectangle  new origin: origin  extent:  scale ⌾ 0.<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">self setfont: altostyle fonts◦fontnumber.<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">]</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 10pt serif">classInit<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">[fontmenu &larr; Menu new string:<br>&rsquo;strike<br>set width<br>debug<br>move<br>close&rsquo;]</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 12pt serif"><br>Scheduler</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 10pt serif">eachtime</span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: italic 10pt serif">"while active"</span><span style="font: 10pt serif"><br></span><span class="tab" val="79"></span><span style="font: 10pt serif">[clearframe has: user mp⇒<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">[user redbug ⇒<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">[self setbit: user mp color: black]</span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: italic 10pt serif">"make dot black"</span><span style="font: 10pt serif"><br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">user yellowbug ⇒<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">[self setbit: user mp color: white]</span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: italic 10pt serif">"make dot white"</span><span style="font: 10pt serif"><br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">user bluebug ⇒<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">[fontmenu bug<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">=1⇒[self strike];</span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: italic 10pt serif">"put strike of font in dialogue window"</span><span style="font: 10pt serif"><br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">=2⇒[self setwidth];</span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: italic 10pt serif">"grow character"</span><span style="font: 10pt serif"><br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">=3⇒[self updateseglength: font raster: fontraster.<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">self updatemaxwidth.</span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: italic 10pt serif">"clean things up"</span><span style="font: 10pt serif"><br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">user notify: &rsquo;font debugging&rsquo;];<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">=4⇒[self frame];</span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: italic 10pt serif">"move fontwindow"</span><span style="font: 10pt serif"><br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">=5⇒[clearframe clear.<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">self updateseglength: font raster: fontraster.<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">self updatemaxwidth.</span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: italic 10pt serif">"clean things up"</span><span style="font: 10pt serif"><br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">user unschedule: self. ⇑false]]<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">user kbck⇒<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">[char &larr; user kbd. self setchar: char]<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">]<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">user anybug⇒[⇑false]<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">]</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 10pt serif"> firsttime</span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: italic 10pt serif">"upon entry"</span><span style="font: 10pt serif"><br></span><span class="tab" val="79"></span><span style="font: 10pt serif">[<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">clearframe has: user mp⇒[self show]<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">⇑false<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">]</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 10pt serif">lasttime</span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: italic 10pt serif">"upon exit"</span><span style="font: 10pt serif"><br></span><span class="tab" val="79"></span><span style="font: 10pt serif">[]</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 12pt serif"><br>Editing</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 10pt serif">setascent: ascentdelta </span><span style="font: 10pt serif">| updatedfont ascent<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">[</span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif"> </span><span style="font: italic 10pt serif">"ascent delta"</span><span style="font: 10pt serif"><br></span><span class="tab" val="79"></span><span style="font: 10pt serif">ascent &larr; font word: 6.<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">[ascent + ascentdelta &lt; 0 ⇒[ascentdelta &larr; 0 - ascent]].<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">[ascentdelta &gt; 0 ⇒<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">[<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">updatedfont &larr; String new: (2 * fontraster * ascentdelta).</span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: italic 10pt serif">"grow"</span><span style="font: 10pt serif"><br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">updatedfont all &larr;  0.</span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: italic 10pt serif">"fill with white"</span><span style="font: 10pt serif"><br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">updatedfont &larr;</span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: italic 10pt serif">"add oldfont header and new space together"</span><span style="font: 10pt serif"><br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">(font◦(1 to: 18) concat: updatedfont◦(1 to: updatedfont length)).<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">updatedfont &larr;</span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: italic 10pt serif">"now add on rest of old font"</span><span style="font: 10pt serif"><br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">(updatedfont concat: font◦(19 to: font length)).<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">]<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">updatedfont &larr; (font◦(1 to: 18) concat:</span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: italic 10pt serif">"shrink"</span><span style="font: 10pt serif"><br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">font◦((19 + (0 - (2 * fontraster * ascentdelta))) to: font length)).<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">].<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">updatedfont word: 6 &larr; ascent + ascentdelta.</span><span class="tab" val="79"></span><span style="font: italic 10pt serif">"reset ascent word in font"</span><span style="font: 10pt serif"><br></span><span class="tab" val="79"></span><span style="font: 10pt serif">self setfont: updatedfont.</span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: italic 10pt serif">"updatedfont now font of interest"<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">self updateseglength: font raster: fontraster.<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">]</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 10pt serif">setbit: bitpoint color: color</span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: italic 10pt serif">"turn bits on, off"</span><span style="font: 10pt serif"><br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">| x y<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">[<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">bitpoint &larr;  bitpoint - frame origin.<br></span><span class="tab" val="79"></span><span style="font: 10pt serif"> x &larr; (0 max: (charwid-1)) min: (bitpoint x/scale).<br></span><span class="tab" val="79"></span><span style="font: 10pt serif"> y &larr; (0 max: (fontht-1)) min: (bitpoint y/scale).<br></span><span class="tab" val="79"></span><span style="font: 10pt serif"> boxer moveto: frame origin + ((scale*x) ⌾ (scale*y)).<br></span><span class="tab" val="79"></span><span style="font: 10pt serif"> boxer color: color mode: storing.</span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: italic 10pt serif">"turn bit on/off in blowup"</span><span style="font: 10pt serif"><br><br></span><span class="tab" val="79"></span><span style="font: 10pt serif">bitsetter destraster &larr; fontraster.</span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: italic 10pt serif">"set up bitblt table."</span><span style="font: 10pt serif"><br></span><span class="tab" val="79"></span><span style="font: 10pt serif">bitsetter destx &larr; charx + x.<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">bitsetter desty &larr; y.<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">bitsetter destbase &larr; font; dstrike&larr; true.  </span><span style="font: italic 10pt serif">"lock font and get core ptr"</span><span style="font: 10pt serif"><br></span><span class="tab" val="79"></span><span style="font: 10pt serif">bitsetter fill: storing color: color.</span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: italic 10pt serif">"turn bit on/off in font"</span><span style="font: 10pt serif">]</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 10pt serif">setchar: char<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">[<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">charstr◦1 &larr;  char.<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">[((font word: 2) ≤ char) and: (char ≤ (font word: 3))⇒<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">[char &larr; char - (font word: 2)]<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">char &larr; ((font word: 3) - (font word: 2)) + 1].</span><span class="tab" val="79"></span><span style="font: italic 10pt serif">"char out of range"</span><span style="font: 10pt serif"><br></span><span class="tab" val="79"></span><span style="font: 10pt serif">charx &larr; (font word: (fontxtabl+ (char))).<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">charwid &larr; (font word: (fontxtabl + char+1)) - charx.<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">clearframe clear.<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">frame extent &larr; charwid ⌾  fontht.<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">clearframe &larr;<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">frame inset: ¬2 ⌾ ¬2</span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: italic 10pt serif">"for clearing everything including outline"</span><span style="font: 10pt serif"><br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">and: (charwid - (charwid * scale + 2)) ⌾ (fontht - (fontht * scale + 2)).<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">self show.<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">]</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 10pt serif">setdescent: descentdelta </span><span style="font: 10pt serif">| updatedfont descent space<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">[</span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: italic 10pt serif">"descent delta"</span><span style="font: 10pt serif"><br></span><span class="tab" val="79"></span><span style="font: 10pt serif">descent &larr; font word: 7.<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">[descent + descentdelta &lt; 0 ⇒ [ descentdelta &larr; 0 - descent]].<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">[descentdelta &gt; 0 ⇒<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">[space &larr; String new: 2 * fontraster * descentdelta.<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">space all &larr; 0.<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">updatedfont &larr; (font ◦ (1 to: fontxtabl - 1 * 2) concat: space).<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">updatedfont &larr; (self appendxtable: updatedfont).<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">]<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">updatedfont &larr;<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">(font ◦ (1 to: ((fontxtabl - 1 * 2) + (fontraster * descentdelta * 2)))).<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">updatedfont &larr; (self appendxtable: updatedfont).<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">].<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">updatedfont word: 7 &larr;<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">descent + descentdelta.</span><span class="tab" val="79"></span><span style="font: italic 10pt serif">"reset descent word in font"</span><span style="font: 10pt serif"><br></span><span class="tab" val="79"></span><span style="font: 10pt serif">self setfont: updatedfont.</span><span class="tab" val="79"></span><span style="font: italic 10pt serif">"updatedfont now font of interest"<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">self updateseglength: font raster: fontraster.<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">]</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 10pt serif">setfont: font<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">[<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">altostyle fonts ◦ fontnumber &larr; font.<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">fontraster &larr; font word: 9.<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">fontht &larr; (font word: 6) + ( font word: 7).</span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: italic 10pt serif">"ascent + descent"</span><span style="font: 10pt serif"><br></span><span class="tab" val="79"></span><span style="font: 10pt serif">fontxtabl &larr; fontraster * fontht + 9 </span><span style="font: italic 10pt serif">"header"</span><span style="font: 10pt serif"> + 1 </span><span style="font: italic 10pt serif">"for 0 addressing"</span><span style="font: 10pt serif">.<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">bitsetter width &larr;  1. bitsetter height &larr; 1.<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">self setchar: charstr◦1.<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">]</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 10pt serif">setwidth </span><span style="font: 10pt serif">| newextentx outlineframe<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">[</span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: italic 10pt serif">"get new size"</span><span style="font: 10pt serif"><br></span><span class="tab" val="79"></span><span style="font: 10pt serif">outlineframe &larr; clearframe inset: 1 ⌾ 1 and: 0 ⌾ 1.<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">OriginCursor showwhile⦂<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">[user waitbug⇒<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">[while⦂ user anybug do⦂<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">[outlineframe growto:<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">((clearframe origin x + 2) +<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">(newextentx &larr; (user mp x - clearframe origin x + 2) | scale))<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif"> ⌾ (outlineframe corner y).<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">outlineframe border: 2 color: black.<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">outlineframe border: 2 color: background<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">].<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">].<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">].<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">outlineframe border: 2 color: black.<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">self setwidth: newextentx / scale.<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">]</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 10pt serif">setwidth: delta<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">| fontrightx newraster newxtabl newmaxwidth updatedfont i<br><br></span><span class="tab" val="79"></span><span style="font: 10pt serif">[</span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: italic 10pt serif">"change in width"</span><span style="font: 10pt serif"><br></span><span class="tab" val="79"></span><span style="font: 10pt serif">delta &larr; delta - charwid. delta = 0 ⇒ [self show. ⇑false].<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">fontrightx &larr;<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">font word: (fontxtabl + ((font word: 3) - (font word: 2)) + 2).<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">newraster &larr;<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">[(fontrightx + 15 / 16) ≠ (i &larr; (fontrightx + delta + 15 / 16)) ⇒<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">[ i ] fontraster].<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">newxtabl &larr; newraster * fontht + 9 </span><span style="font: italic 10pt serif">"header"</span><span style="font: 10pt serif"> + 1 </span><span style="font: italic 10pt serif">"for 0 addressing"</span><span style="font: 10pt serif">.<br><br></span><span class="tab" val="79"></span><span style="font: 10pt serif">XeqCursor showwhile⦂ <br></span><span class="tab" val="79"></span><span style="font: 10pt serif">[<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">updatedfont &larr; String new:<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">(9 </span><span style="font: italic 10pt serif">"header"</span><span style="font: 10pt serif"> + (newraster * fontht </span><span style="font: italic 10pt serif">"bits"</span><span style="font: 10pt serif">)) * 2.</span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: italic 10pt serif">"grow/shrink the bits"</span><span style="font: 10pt serif"><br></span><span class="tab" val="79"></span><span style="font: 10pt serif">for⦂ i to: 8 do⦂<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">[updatedfont word: i &larr; font word: i].</span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: italic 10pt serif">"fill in header of new font"</span><span style="font: 10pt serif"><br></span><span class="tab" val="79"></span><span style="font: 10pt serif">updatedfont word: 9 &larr; newraster.</span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: italic 10pt serif">"set raster in new font"</span><span style="font: 10pt serif"><br></span><span class="tab" val="79"></span><span style="font: italic 10pt serif">"copy the xtable"</span><span style="font: 10pt serif"><br></span><span class="tab" val="79"></span><span style="font: 10pt serif">updatedfont &larr; (self appendxtable: updatedfont).<br><br></span><span class="tab" val="79"></span><span style="font: italic 10pt serif">"set up to copy up to old bits of char"</span><span style="font: 10pt serif"><br></span><span class="tab" val="79"></span><span style="font: 10pt serif">bitsetter destraster &larr; newraster.<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">bitsetter destx &larr; 0. bitsetter desty &larr; 0.<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">bitsetter sourcex &larr; 0. bitsetter sourcey &larr; 0.<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">bitsetter width &larr; charx + charwid.<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">bitsetter height &larr; fontht.<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">bitsetter sourceraster &larr; fontraster.<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">bitsetter destbase &larr; updatedfont.<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">bitsetter sourcebase &larr; font.<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">bitsetter sstrike&larr; true; dstrike&larr; true.<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">bitsetter copy: storing.<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">[</span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: italic 10pt serif">"if char grown, clean out right side of char"</span><span style="font: 10pt serif"><br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">delta&lt; 0 ⇒[]<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">bitsetter destx &larr; charx + charwid.<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">bitsetter width &larr; delta.<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">bitsetter fill: storing color: 0.<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">].<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: italic 10pt serif">"now copy remainder of font"</span><span style="font: 10pt serif"><br></span><span class="tab" val="79"></span><span style="font: 10pt serif">bitsetter destx &larr; charx + charwid + delta.<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">bitsetter width &larr; fontrightx - charx - charwid.<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">bitsetter sourcex &larr; charx + charwid.<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">bitsetter copy: storing.<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: italic 10pt serif">"shift x-vals"</span><span style="font: 10pt serif"><br></span><span class="tab" val="79"></span><span style="font: 10pt serif">for⦂ i from: ((char + 1)<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">to: (2 + (updatedfont word: 3) - (updatedfont word: 2) </span><span style="font: italic 10pt serif">"max"</span><span style="font: 10pt serif">)) do⦂<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">[updatedfont word: (newxtabl + i) &larr;<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">delta + (updatedfont word: (newxtabl +i ))].<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">clearframe clear.</span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: italic 10pt serif">"clear out old version of character"<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">self setfont: updatedfont.</span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: italic 10pt serif">"set up the new copy of the font"</span><span style="font: 10pt serif"><br></span><span class="tab" val="79"></span><span style="font: 10pt serif">self updateseglength: font raster: fontraster.<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">self updatemaxwidth.<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">].<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">]</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 12pt serif"><br>Image</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 10pt serif">frame<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">[clearframe clear.<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">frame moveto:<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">(OriginCursor showwhile⦂<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">[user waitbug⇒[user mp]]).<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">self setchar: char.<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">]</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 10pt serif">show </span><span style="font: 10pt serif">|</span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: italic 10pt serif">"refresh window"</span><span style="font: 10pt serif"><br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">tempframe showrun showpara<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">[<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">showrun &larr; String new: 2.<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">showrun word: 1 &larr;  16 * (fontnumber-1) + 0177400.<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">showpara &larr; Paragraph new text: charstr runs: showrun alignment: 0.<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">tempframe &larr; Textframe new para: showpara frame: frame style: altostyle.<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">tempframe show.<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">frame blowup: (frame origin) by: scale.<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">]</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 12pt serif"><br>Strike format</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 10pt serif">appendxtable: thefont<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">[</span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: italic 10pt serif">"put fontⓢxtable on end of a grown/shrunk font"</span><span style="font: 10pt serif"><br></span><span class="tab" val="79"></span><span style="font: 10pt serif">thefont &larr; thefont concat: font ◦ ((fontxtabl * 2 - 1) to: font length).<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">⇑thefont.<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">]</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 10pt serif">cufixup </span><span style="font: 10pt serif">|  </span><span style="font: italic 10pt serif">"Carnegie-Mellon fixup for scale compatibility"</span><span style="font: 10pt serif"><br></span><span class="tab" val="79"></span><span style="font: 10pt serif">[boxer extent &larr; (scale-1)⌾(scale-1).<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">frame extent &larr; scale⌾0.<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">clearframe extent &larr; scale⌾0.<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">]</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 10pt serif">makecu: name scale: cuscale  </span><span style="font: italic 10pt serif">"Put out font in Carnegie-Mellon format"</span><span style="font: 10pt serif"><br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">| f svscale svchar  bitwidth i bitmover bits<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">[f &larr; dp0 file: name + &rsquo;.cu.&rsquo;.<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">self updateseglength: font raster: fontraster.  self updatemaxwidth.<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">svscale &larr; scale. scale &larr; cuscale.  svchar &larr; char.<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">self cufixup.<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">f nextword &larr; fontht*scale.<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">f nextword &larr; (bitwidth &larr; (font word: 4)) * scale + 15 / 16.<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">bits &larr; String new: ((fontht * scale) * ((bitwidth * scale + 15)/16)) * 2.<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">bitmover &larr; BitBlt init.<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">bitmover destbase &larr; bits lock.<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">bitmover destraster &larr; bitwidth * scale + 15 / 16.<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">bitmover destx &larr; 0.<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">bitmover desty &larr; 0.<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">bitmover sourcebase &larr; mem◦066.<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">bitmover sourceraster &larr; (user screenrect extent x) + 15/16.<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">bitmover sourcex &larr; frame origin x.<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">bitmover sourcey &larr; frame origin y.<br></span><span class="tab" val="79"></span><span style="font: 10pt serif"><br></span><span class="tab" val="79"></span><span style="font: 10pt serif">for⦂ i from: ((font word: 2) to: (font word: 3) by: 1) do⦂<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">[self setchar: i.<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">f nextword &larr; i. f nextword &larr; charwid*scale.<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">bitmover width &larr; (frame extent x) * scale.<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">bitmover height &larr; (frame extent y) * scale.<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">bits all &larr; 0.<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">bitmover copy: storing.<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">f append: bits].<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">f close. scale &larr; svscale. self cufixup. bits unlock. self setchar: svchar]</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 10pt serif">newfont: fontht maxcharwidth: maxcharwidth min: min max: max ascent: ascent kern: kern<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">| raster i x<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">[XeqCursor showwhile⦂<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">[raster &larr; (2 + max - min * maxcharwidth + 15)/16.<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">font &larr; String new:  (3 + max - min + (fontht * raster) + 9 * 2).<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">font word: 1 &larr; 0100000.</span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: italic 10pt serif">"format: strike, simple, varwidth"</span><span style="font: 10pt serif"><br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">font word: 2 &larr; min.</span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: italic 10pt serif">"min ascii code"</span><span style="font: 10pt serif"><br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">font word: 3 &larr; max.</span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: italic 10pt serif">"max ascii code"</span><span style="font: 10pt serif"><br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">font word: 4 &larr; maxcharwidth.</span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: italic 10pt serif">"max char width"</span><span style="font: 10pt serif"><br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">font word: 5 &larr; (2+max-min + 5 + (fontht*raster)).</span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: italic 10pt serif">"segment length"</span><span style="font: 10pt serif"><br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">font word: 6 &larr; ascent.</span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: italic 10pt serif">"bits above baseline"</span><span style="font: 10pt serif"><br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">font word: 7 &larr; fontht-ascent.</span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: italic 10pt serif">"bits below baseline"</span><span style="font: 10pt serif"><br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">font word: 8 &larr; kern.</span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: italic 10pt serif">"kerning offset"</span><span style="font: 10pt serif"><br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">font word: 9 &larr; raster.</span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: italic 10pt serif">"#words per scan-line in bitmap"</span><span style="font: 10pt serif"><br><br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">(font◦((18 + 1) to: 2 * raster * fontht + 18)) all &larr; 0.</span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: italic 10pt serif">"chars all white"</span><span style="font: 10pt serif"><br><br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">ascent &larr; ascent min: (fontht-1).</span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: italic 10pt serif">"keep baseline within char"</span><span style="font: 10pt serif"><br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">(font◦(2 * raster * ascent + 18 + 1 to:<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">ascent+1*raster*2 + 18)) all &larr; 0377.</span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: italic 10pt serif">"put in a black baseline"</span><span style="font: 10pt serif"><br><br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">x &larr; 0.<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">for⦂ i  from: (raster * fontht + 9 + 1 to:<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">raster * fontht + 9 + 3 + max - min by: 1) do⦂<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">[font word: i &larr; x. x &larr; x+maxcharwidth].</span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: italic 10pt serif">"table of left x"</span><span style="font: 10pt serif"><br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">].<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">⇑font.<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">]</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 10pt serif">strike </span><span style="font: 10pt serif">| i</span><span class="tab" val="79"></span><span style="font: 10pt serif">showstr </span><span style="font: italic 10pt serif">"Put a strike of font into dialogue window"</span><span style="font: 10pt serif"><br></span><span class="tab" val="79"></span><span style="font: 10pt serif">[showstr &larr; String new: 128. for⦂ i to: 128 do⦂ [showstr◦i &larr;i].<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">user clearshow: showstr]</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 10pt serif">updatemaxwidth </span><span style="font: 10pt serif">| newmaxwidth i<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">[</span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: italic 10pt serif">"update max width"</span><span style="font: 10pt serif"><br></span><span class="tab" val="79"></span><span style="font: 10pt serif">newmaxwidth &larr; 0.<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">for⦂ i from: (fontxtabl to: fontxtabl + ((font word: 3) - (font word: 2) + 1) by: 1) do⦂<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">[newmaxwidth &larr; (newmaxwidth max: ((font word: i+1) - (font word: i)))].<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">font word: 4 &larr; newmaxwidth.<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">]</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 10pt serif">updateseglength: newfont raster: newraster<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">[</span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: italic 10pt serif">"compute new segment length for a font"</span><span style="font: 10pt serif"><br></span><span class="tab" val="79"></span><span style="font: 10pt serif">newfont word: 5 &larr;</span><span class="tab" val="79"></span><span style="font: 10pt serif">(5</span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: italic 10pt serif">"length, ascent, descent, kern, and raster"</span><span style="font: 10pt serif"><br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">+ (newraster * fontht)</span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: italic 10pt serif">"bits"</span><span style="font: 10pt serif"><br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">+ ((font word: 3 </span><span style="font: italic 10pt serif">"max"</span><span style="font: 10pt serif">) -<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">(font word: 2</span><span style="font: italic 10pt serif">"min"</span><span style="font: 10pt serif">) + 2)</span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: italic 10pt serif">"xtabl"</span><span style="font: 10pt serif"><br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">).<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">]</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: 10pt serif"></span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: 10pt serif">SystemOrganization classify: ↪FontWindow under: &rsquo;Windows&rsquo;.</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: 10pt serif">FontWindow classInit</span></div>
<div style="width: 141pt; margin-left: 425pt; margin-top: 0pt; text-align: left">
<span style="font: bold 12pt serif"><br>"Window"</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 12pt serif">Class new title: &rsquo;Window&rsquo;<br></span><span class="tab" val="79"></span><span style="font: bold 12pt serif">subclassof: Object<br></span><span class="tab" val="79"></span><span style="font: bold 12pt serif">fields: &rsquo;frame collapsed titlepara growing exitflag &rsquo;<br></span><span class="tab" val="79"></span><span style="font: bold 12pt serif">declare: &rsquo;titlerun border titleloc titleframe windowmenu &rsquo;;<br></span><span class="tab" val="79"></span><span style="font: bold 12pt serif">asFollows</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: italic 10pt serif"><br>This is a superclass for presenting windows on the screen.  Besides outlining and scheduling the frame, it includes the distribution of user events which will someday be driven by interrupts.</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 12pt serif"><br>Initialization</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 10pt serif">classInit</span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">"Window classInit"</span><span style="font: bold 10pt serif"><br></span><span class="tab" val="79"></span><span style="font: 10pt serif">[border &larr; 2⌾2.<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">titleframe &larr; Textframe new para: nil frame: nil.<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">titleloc &larr; 3⌾(¬4-titleframe lineheight).<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">titlerun &larr; String new: 2.<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">titlerun word: 1 &larr; 0177401.<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">windowmenu &larr; Menu new string:<br>&rsquo;under<br>frame<br>close<br>print<br>printbits<br>&rsquo;]</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 10pt serif">reset<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">[exitflag&larr;true. growing&larr;false] </span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 12pt serif"><br>Scheduling</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 10pt serif">eachtime<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">[frame has: user mp⇒<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">[user kbck⇒[⇑self kbd]<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">user anybug⇒<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">[user redbug⇒[⇑self redbug]<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">user yellowbug⇒[⇑self yellowbug]<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">user bluebug⇒[⇑self bluebug]]<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">user anykeys⇒[⇑self keyset]]<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">self outside⇒[]<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">user anybug⇒[frame has: user mp⇒[] ⇑false]<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">user kbck⇒[user kbd. frame flash] </span><span style="font: italic 10pt serif">"flush typing outside"</span><span style="font: 10pt serif">]</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 10pt serif">firsttime<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">[frame has: user mp⇒ [self reset.  ⇑self enter] ⇑false]</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 10pt serif">lasttime<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">[self leave. ⇑exitflag]</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 10pt serif">schedule </span><span style="font: 10pt serif">[user restartup: self]</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 12pt serif"><br>Framing</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 10pt serif">clearTitle: color<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">[(titleframe window inset: ¬2⌾¬2) clear: color]</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 10pt serif">editTitle </span><span style="font: 10pt serif">| pared w<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">[pared&larr; ParagraphEditor new para: titlepara frame: nil.<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">pared formerly: false; fixframe: titleframe window+(1⌾2).<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">pared enter.  w&larr; titleframe window.<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">until⦂ (user anybug and⦂ (w has: user mp)≡false) do⦂<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">[user kbck⇒[pared typing]<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">user redbug⇒[w has: user mp⇒[pared selecting]]<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">user yellowbug⇒[w has: user mp⇒[w flash]]].<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">titlepara&larr; pared contents.<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">self showtitle]</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 10pt serif">erase<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">[(frame inset: ¬2⌾¬2) clear.<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">self clearTitle: background]</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 10pt serif">fixedwidthfromuser: width </span><span style="font: 10pt serif">| a b oldframe [<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">user waitnobug.<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">[frame≡nil⇒[] self aboutToFrame; erase].<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">a &larr; OriginCursor showwhile⦂ user waitbug.<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">growing &larr; true.<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">self frame: (frame &larr; self fixframe: (a rect: a+(width⌾32))); show.<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">CornerCursor showwhile⦂ [<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">while⦂ (a &larr; user mpnext)  do⦂ [ a x &larr; frame corner x.<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">[oldframe≡nil⇒ [user cursorloc &larr; a max: frame corner]].<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">oldframe &larr; frame copy.<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">self frame: (frame &larr; self fixframe: (frame growto: a));<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">moveFrom: oldframe]].<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">growing &larr; false.<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">self takeCursor]</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 10pt serif">fixframe: f </span><span style="font: 10pt serif">[⇑Rectangle new origin: f origin extent: (f extent max: 32⌾32)]</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 10pt serif">frame <br></span><span class="tab" val="79"></span><span style="font: 10pt serif">[ ⇑ frame ]</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 10pt serif">frame: f<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">[frame &larr; self fixframe: f]</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 10pt serif">moveFrom: oldframe<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">[(oldframe inset: ¬2) clear. self show]</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 10pt serif">newframe<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">| a oldframe<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">[user waitnobug; restoredisplay.<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">[frame≡nil<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">⇒[]<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">self aboutToFrame; erase].<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">a &larr; OriginCursor showwhile⦂ user waitbug.<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">growing &larr; true.<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">frame &larr; self fixframe: (a rect: a+32).<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">frame outline.<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">CornerCursor showwhile⦂<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">[while⦂ (a &larr; user mpnext) do⦂<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">[[oldframe≡nil<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">⇒ [user cursorloc &larr; a max: frame corner]].<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">oldframe &larr; frame copy.<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">frame &larr; self fixframe: (frame growto: a).<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">(oldframe inset: ¬2) clear.<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">frame outline]].<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">self frame: frame.<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">growing &larr; false.<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">self takeCursor]</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 10pt serif">outline<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">[</span><span style="font: italic 10pt serif">"Clear and outline me."</span><span style="font: 10pt serif"><br></span><span class="tab" val="79"></span><span style="font: 10pt serif">frame outline]</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 10pt serif">show </span><span style="font: 10pt serif">[<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">self outline.<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">growing⇒[]<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">self showtitle]</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 10pt serif">showtitle<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">[[titlepara≡nil⇒<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">[titlepara&larr; Paragraph new text: self title runs: titlerun alignment: 0]].<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">titleframe put: titlepara at: frame origin+titleloc; outline]</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 10pt serif">takeCursor<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">[</span><span style="font: italic 10pt serif">"Move the cursor to my center."</span><span style="font: 10pt serif"><br></span><span class="tab" val="79"></span><span style="font: 10pt serif">user cursorloc &larr; frame center]</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 10pt serif">title </span><span style="font: 10pt serif">[⇑&rsquo;Untitled&rsquo;]</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 12pt serif"><br>Default Event responses</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 10pt serif">aboutToFrame<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">[</span><span style="font: italic 10pt serif">"My frame is about to change.  I dont care."</span><span style="font: 10pt serif">]</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 10pt serif">bluebug<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">[windowmenu bug<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">=1⇒[⇑exitflag &larr; false];<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">=2⇒[self newframe. self enter];<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">=3⇒[self close. self erase.<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">user unschedule: self. ⇑false];<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">=4⇒[self hardcopy];<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">=5⇒[self print]]</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 10pt serif">close </span><span style="font: 10pt serif">[]</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 10pt serif">enter </span><span style="font: 10pt serif">[self show]</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 10pt serif">hardcopy </span><span style="font: 10pt serif">[frame flash]</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 10pt serif">kbd </span><span style="font: 10pt serif">[user kbd. frame flash]</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 10pt serif">keyset </span><span style="font: 10pt serif">[frame flash]</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 10pt serif">leave </span><span style="font: 10pt serif">[]</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 10pt serif">outside </span><span style="font: 10pt serif">[titleframe window has: user mp⇒<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">[user anybug⇒[self editTitle] ⇑false]<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">⇑false]</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 10pt serif">print<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">[(dp0 pressfile: (self title + &rsquo;.press.&rsquo;) asFileName)<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">screenout: frame scale: PressScale; toPrinter]</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 10pt serif">redbug<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">[frame flash]</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 10pt serif">yellowbug<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">[frame flash]</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: 10pt serif"></span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: 10pt serif">SystemOrganization classify: ↪Window under: &rsquo;Windows&rsquo;.</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: 10pt serif">Window classInit</span></div>
<div style="width: 141pt; margin-left: 425pt; margin-top: 0pt; text-align: left">
<span style="font: bold 12pt serif"><br>"PanedWindow"</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 12pt serif">Class new title: &rsquo;PanedWindow&rsquo;<br></span><span class="tab" val="79"></span><span style="font: bold 12pt serif">subclassof: Window<br></span><span class="tab" val="79"></span><span style="font: bold 12pt serif">fields: &rsquo;panes templates title&rsquo;<br></span><span class="tab" val="79"></span><span style="font: bold 12pt serif">declare: &rsquo;&rsquo;;<br></span><span class="tab" val="79"></span><span style="font: bold 12pt serif">asFollows</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: italic 10pt serif"><br>A paned window is a Window that has subwindows (panes) that are awakened and resized in unison. The instance variable templates is a set of Rectangles for the frames of the panes normalized such that the whole PanedWindow is a frame of 0⌾0 rect: 36⌾36.</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 12pt serif"><br>Initialization</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 10pt serif">title: title with: panes at: templates </span><span style="font: 10pt serif">| pane<br>"The instance variable templates is a set of Rectangles for the frames of the panes normalized such that the whole PanedWindow is a frame of 0⌾0 rect: 36⌾36."<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">[self reset.<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">for⦂ pane from: panes do⦂ [pane init]]</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 12pt serif"><br>Window protocol</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 10pt serif">close </span><span style="font: 10pt serif">| pane<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">[for⦂ pane from: panes do⦂ [pane close]]</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 10pt serif">eachtime </span><span style="font: 10pt serif">| pane<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">[frame has: user mp⇒<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">[user bluebug⇒[⇑self bluebug]<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">for⦂ pane from: panes do⦂ [pane startup]]<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">self outside⇒[]<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">user anybug⇒[frame has: user mp⇒[] ⇑false]<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">user kbck⇒[user kbd. frame flash] </span><span style="font: italic 10pt serif">"flush typing outside"</span><span style="font: 10pt serif">]</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 10pt serif">enter </span><span style="font: 10pt serif">| pane<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">[super show.<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">for⦂ pane from: panes do⦂ [pane windowenter]]</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 10pt serif">erase<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">[self titlerect clear. super erase]</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 10pt serif">fixframe: f<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">[⇑Rectangle new origin: f origin extent: (f extent max: 160⌾80)]</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 10pt serif">frame: frame </span><span style="font: italic 10pt serif">"(Re)initialize my frame, and tell my panes their locations."</span><span style="font: 10pt serif"><br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">| templateStream template pane orig ext<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">[templateStream &larr; templates asStream.<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">orig&larr; frame origin-1. ext&larr; frame extent+2.<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">for⦂ pane from: panes do⦂<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">[</span><span style="font: italic 10pt serif">"It would be nice to have parallel fors as in MLISP."</span><span style="font: 10pt serif"><br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">template &larr; templateStream next.<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">pane frame &larr; (template*ext /36 + orig) inset: 1]]</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 10pt serif">hardcopy </span><span style="font: 10pt serif">| p<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">[user displayoffwhile⦂ [<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">p &larr; dp0 pressfile: (self title+&rsquo;.press&rsquo;) asFileName.<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">self hardcopy: p.<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">p close; toPrinter]]</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 10pt serif">hardcopy: pf </span><span style="font: 10pt serif">| pane [<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">self hardcopyTitle: pf.<br><br></span><span class="tab" val="79"></span><span style="font: 10pt serif">"print frame rectangle"<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">frame hardcopy: pf.<br><br></span><span class="tab" val="79"></span><span style="font: 10pt serif">"print all panes"<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">for⦂ pane from: panes do⦂ [pane hardcopy: pf].<br><br></span><span class="tab" val="79"></span><span style="font: 10pt serif">"print cursor if it&rsquo;s inside"<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">frame has: user mp⇒ [user currentCursor hardcopy: pf]]</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 10pt serif">hardcopyTitle: pf </span><span style="font: 10pt serif">[<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">"refresh title (since it&rsquo;s a class var)"<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">self showtitle.<br><br></span><span class="tab" val="79"></span><span style="font: 10pt serif">"draw title rectangle"<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">titleframe window hardcopy: pf.<br><br></span><span class="tab" val="79"></span><span style="font: 10pt serif">"print title text (make frame larger)"<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">titleframe para presson: pf in: (pf transrect: (<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">titleframe frame origin rect: titleframe frame corner + (999 ⌾ 2)))<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">style: titleframe style]</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 10pt serif">kbd </span><span style="font: 10pt serif">| pane<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">[(pane &larr; self pickedpane)⇒ [⇑pane kbd]]</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 10pt serif">keyset </span><span style="font: 10pt serif">| pane<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">[(pane &larr; self pickedpane)⇒ [⇑pane keyset]]</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 10pt serif">leave </span><span style="font: 10pt serif">| pane<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">[for⦂ pane from: panes do⦂ [pane windowleave]]</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 10pt serif">pickedpane </span><span style="font: 10pt serif">| pane<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">[for⦂ pane from: panes do⦂ [pane picked⇒ [⇑pane]]<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">frame flash. ⇑false]</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 10pt serif">redbug </span><span style="font: 10pt serif">| pane<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">[(pane &larr; self pickedpane)⇒ [⇑pane redbug]]</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 10pt serif">show </span><span style="font: 10pt serif">| pane<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">[super show.<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">for⦂ pane from: panes do⦂ [pane outline]]</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 10pt serif">takeCursor<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">[(panes◦1) takeCursor]</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 10pt serif">title<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">[⇑title]</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 10pt serif">yellowbug </span><span style="font: 10pt serif">| pane<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">[(pane &larr; self pickedpane)⇒ [⇑pane yellowbug]]</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 12pt serif"><br>Pane services</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 10pt serif">vanish<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">[self close; erase. user unschedule: self.]</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 12pt serif"><br>Private</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 10pt serif">titlerect<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">[⇑frame origin - (2 ⌾ (DefaultTextStyle lineheight + 4)) rect: (frame corner x⌾frame origin y) + (2⌾0)]</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: 10pt serif"></span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: 10pt serif">SystemOrganization classify: ↪PanedWindow under: &rsquo;Windows&rsquo;.</span></div>
<div style="width: 141pt; margin-left: 425pt; margin-top: 0pt; text-align: left">
<span style="font: bold 12pt serif"><br>"BrowseWindow"</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 12pt serif">Class new title: &rsquo;BrowseWindow&rsquo;<br></span><span class="tab" val="79"></span><span style="font: bold 12pt serif">subclassof: PanedWindow<br></span><span class="tab" val="79"></span><span style="font: bold 12pt serif">fields: &rsquo;&rsquo;<br></span><span class="tab" val="79"></span><span style="font: bold 12pt serif">declare: &rsquo;stdTemplates &rsquo;;<br></span><span class="tab" val="79"></span><span style="font: bold 12pt serif">asFollows</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: italic 10pt serif"><br>I am a five-paned window to browse through classes.  My panes are...<br></span><span class="tab" val="79"></span><span style="font: italic 10pt serif">system pane: categories of classes in the system<br></span><span class="tab" val="79"></span><span style="font: italic 10pt serif">class pane: classes in the selected category<br></span><span class="tab" val="79"></span><span style="font: italic 10pt serif">organization pane: categories of methods in the selected class<br></span><span class="tab" val="79"></span><span style="font: italic 10pt serif">selector pane: method selectors in the selected category<br></span><span class="tab" val="79"></span><span style="font: italic 10pt serif">code pane: source code of the selected method, if any, else other useful info</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 12pt serif"><br>Initialization</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 10pt serif">classInit<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">[stdTemplates &larr; (0⌾0 rect: 10⌾14), (10⌾0 rect: 18⌾14), (18⌾0 rect: 28⌾14), (28⌾0 rect: 36⌾14), (0⌾14 rect: 36⌾36)]</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 10pt serif">default </span><span class="tab" val="79"></span><span style="font: italic 10pt serif">"Let the user draw a five-paned window to browse through classes."</span><span style="font: 10pt serif"><br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">| systemPane classPane orgPane selectorPane codePane<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">[</span><span style="font: italic 10pt serif">"Create the panes."</span><span style="font: 10pt serif"><br></span><span class="tab" val="79"></span><span style="font: 10pt serif">systemPane &larr; SystemPane new. classPane &larr; ClassPane new.<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">orgPane &larr; OrganizationPane new. selectorPane &larr; SelectorPane new.<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">codePane &larr; CodePane new.<br></span><span class="tab" val="79"></span><span style="font: italic 10pt serif">"Acquire them."</span><span style="font: 10pt serif"><br></span><span class="tab" val="79"></span><span style="font: 10pt serif">self title: &rsquo;Classes&rsquo;<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">with: (systemPane, classPane, orgPane, selectorPane, codePane)<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">at: stdTemplates.<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">self newframe; show.<br></span><span class="tab" val="79"></span><span style="font: italic 10pt serif">"Interconnect them."</span><span style="font: 10pt serif"><br></span><span class="tab" val="79"></span><span style="font: 10pt serif">systemPane to: classPane. classPane from: systemPane to: orgPane.<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">orgPane from: classPane to: selectorPane. selectorPane from: orgPane to: codePane.<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">codePane from: selectorPane.</span><span class="tab" val="79"></span><span style="font: 10pt serif"><br></span><span class="tab" val="79"></span><span style="font: italic 10pt serif">"Display them."</span><span style="font: 10pt serif"><br></span><span class="tab" val="79"></span><span style="font: 10pt serif">systemPane update]</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: 10pt serif"></span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: 10pt serif">SystemOrganization classify: ↪BrowseWindow under: &rsquo;Windows&rsquo;.</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: 10pt serif">BrowseWindow classInit</span></div>
<div style="width: 141pt; margin-left: 425pt; margin-top: 0pt; text-align: left">
<span style="font: bold 12pt serif"><br>"CodeWindow"</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 12pt serif">Class new title: &rsquo;CodeWindow&rsquo;<br></span><span class="tab" val="79"></span><span style="font: bold 12pt serif">subclassof: PanedWindow<br></span><span class="tab" val="79"></span><span style="font: bold 12pt serif">fields: &rsquo;&rsquo;<br></span><span class="tab" val="79"></span><span style="font: bold 12pt serif">declare: &rsquo;stdTemplates &rsquo;;<br></span><span class="tab" val="79"></span><span style="font: bold 12pt serif">asFollows</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: italic 10pt serif"><br>I am a paned window with a code pane to edit a method or a file.</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 12pt serif"><br>Initialization</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 10pt serif">class: class selector: selector para: para formerly: oldpara </span><span style="font: 10pt serif">| codePane<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">[codePane &larr; CodePane new class: class selector: selector para: nil.<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">self title: class title+ &rsquo; &rsquo; + selector with: codePane inVector at: stdTemplates.<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">self newframe; show.<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">codePane showing: para; formerly: oldpara; from: codePane]</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 10pt serif">classInit<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">[stdTemplates &larr; (0⌾0 rect: 36⌾36) inVector]</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 10pt serif">editTitle </span><span style="font: 10pt serif">[titleframe window flash]</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 10pt serif">file: file </span><span style="font: 10pt serif">| filePane<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">[filePane &larr; FilePane new file: file.<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">self title: file name with: filePane inVector at: stdTemplates.<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">self newframe; show.<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">filePane showing: file contents asParagraph; from: filePane]</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 10pt serif">hardcopy: p </span><span style="font: 10pt serif">| pane [for⦂ pane from: panes do⦂ [pane hardcopy: p]]</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: 10pt serif"></span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: 10pt serif">SystemOrganization classify: ↪CodeWindow under: &rsquo;Windows&rsquo;.</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: 10pt serif">CodeWindow classInit</span></div>
<div style="width: 141pt; margin-left: 425pt; margin-top: 0pt; text-align: left">
<span style="font: bold 12pt serif"><br>"InspectWindow"</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 12pt serif">Class new title: &rsquo;InspectWindow&rsquo;<br></span><span class="tab" val="79"></span><span style="font: bold 12pt serif">subclassof: PanedWindow<br></span><span class="tab" val="79"></span><span style="font: bold 12pt serif">fields: &rsquo;variables&rsquo;<br></span><span class="tab" val="79"></span><span style="font: bold 12pt serif">declare: &rsquo;stdTemplates &rsquo;;<br></span><span class="tab" val="79"></span><span style="font: bold 12pt serif">asFollows</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: italic 10pt serif"><br>I am a paned window with a variable pane that displays the fields of an object and a code pane to display their values and to evaluate in their context.</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 12pt serif"><br>Initialization</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 10pt serif">classInit<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">[stdTemplates &larr; (0⌾0 rect: 12⌾36), (12⌾0 rect: 36⌾36)]</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 10pt serif">of: object </span><span style="font: 10pt serif">| instanceVarPane instanceValuePane safeVec n<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">[instanceVarPane &larr; VariablePane new. instanceValuePane &larr; CodePane new.<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">self title: object class title<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">with: (instanceVarPane, instanceValuePane) at: stdTemplates.<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">self newframe; show.<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">instanceVarPane to: instanceValuePane.<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">instanceValuePane from: instanceVarPane.<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">variables &larr; (Vector new: 16) asStream.<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">[object class is: VariableLengthClass⇒<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">[for⦂ n from: object fields do⦂<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">[self identifier: n]]<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">object class fieldNamesInto: self].<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">safeVec &larr; Vector new: 2. safeVec all &larr; object.<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">instanceVarPane names: (↪(self) concat: variables contents) values: safeVec wrt: false]</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 10pt serif">show: object </span><span style="font: 10pt serif">| fixedframe instanceVarPane instanceValuePane safeVec n<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">[instanceVarPane &larr; VariablePane new. instanceValuePane &larr; CodePane new.<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">fixedframe &larr; 400⌾450 rect: 600⌾565.<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">self title: object class title<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">with: (instanceVarPane, instanceValuePane) at: stdTemplates.<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">self frame: (self fixframe: fixedframe); show.<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">instanceVarPane to: instanceValuePane.<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">instanceValuePane from: instanceVarPane.<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">variables &larr; (Vector new: 16) asStream.<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">[object class is: VariableLengthClass⇒<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">[for⦂ n from: object fields do⦂<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">[self identifier: n]]<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">object class fieldNamesInto: self].<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">safeVec &larr; Vector new: 2. safeVec all &larr; object.<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">instanceVarPane names: (↪(self) concat: variables contents) values: safeVec wrt: false]</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 12pt serif"><br>Private</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 10pt serif">comment: s</span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">"</span><span style="font: italic 10pt serif">called by of: via Class fieldNamesInto</span><span style="font: 10pt serif">"</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 10pt serif">contents</span><span class="tab" val="79"></span><span style="font: 10pt serif">"</span><span style="font: italic 10pt serif">called by of: via Class fieldNamesInto</span><span style="font: 10pt serif">"</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 10pt serif">identifier: s</span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">"</span><span style="font: italic 10pt serif">called by of: via Class fieldNamesInto</span><span style="font: 10pt serif">"<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">[variables next &larr; s]</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 10pt serif">separator: c</span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">"</span><span style="font: italic 10pt serif">called by of: via Class fieldNamesInto</span><span style="font: 10pt serif">"</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 10pt serif">trailer: s</span><span class="tab" val="79"></span><span style="font: 10pt serif">"</span><span style="font: italic 10pt serif">called by of: via Class fieldNamesInto</span><span style="font: 10pt serif">"</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: 10pt serif"></span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: 10pt serif">SystemOrganization classify: ↪InspectWindow under: &rsquo;Windows&rsquo;.</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: 10pt serif">InspectWindow classInit</span></div>
<div style="width: 141pt; margin-left: 425pt; margin-top: 0pt; text-align: left">
<span style="font: bold 12pt serif"><br>"NotifyWindow"</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 12pt serif">Class new title: &rsquo;NotifyWindow&rsquo;<br></span><span class="tab" val="79"></span><span style="font: bold 12pt serif">subclassof: PanedWindow<br></span><span class="tab" val="79"></span><span style="font: bold 12pt serif">fields: &rsquo;enoughpanes&rsquo;<br></span><span class="tab" val="79"></span><span style="font: bold 12pt serif">declare: &rsquo;bigTemplates smallFrame smallTemplates &rsquo;;<br></span><span class="tab" val="79"></span><span style="font: bold 12pt serif">asFollows</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: italic 10pt serif"><br>I am a paned window with one or six panes that display the context of an error or breakpoint.</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 12pt serif"><br>Initialization</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 10pt serif">classInit<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">[smallTemplates &larr; (0⌾0 rect: 36⌾36) inVector.<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">bigTemplates &larr; (0⌾0 rect: 12⌾18), (12⌾0 rect: 36⌾18), (0⌾18 rect: 12⌾27), (12⌾18 rect: 36⌾27), (0⌾27 rect: 12⌾36), (12⌾27 rect: 36⌾36).<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">smallFrame &larr; 204⌾366 rect: 404⌾402]</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 10pt serif">of: titleString level: level interrupt: flag </span><span style="font: 10pt serif">| stackPane<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">[NotifyFlag &larr; false.<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">stackPane &larr; StackPane new.<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">self title: titleString with: stackPane inVector at: smallTemplates.<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">smallFrame moveto:<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">[level&gt;1⇒<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">[300⌾50]<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">(user screenrect center-(smallFrame extent/2))].<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">self frame: (self fixframe: smallFrame); show.<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">stackPane context: false at: level instance: false code: false;<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">interrupt: flag.<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">stackPane of: (Top◦level) inVector. NotifyFlag &larr; true]</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 10pt serif">of: titleString stack: stack interrupt: flag </span><span style="font: 10pt serif">| stackPane<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">[NotifyFlag &larr; false.<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">stackPane &larr; StackPane new.<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">self title: titleString with: stackPane inVector at: smallTemplates.<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">smallFrame moveto:<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">[Top currentPriority&gt;1⇒<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">[300⌾50]<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">(user screenrect center-(smallFrame extent/2))].<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">self frame: (self fixframe: smallFrame); show.<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">stackPane context: false instance: false code: false; interrupt: flag.<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">stackPane of: stack inVector. NotifyFlag &larr; true]</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 12pt serif"><br>Window protocol</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 10pt serif">aboutToFrame<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">[enoughpanes &larr; panes length = 6. super aboutToFrame]</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 10pt serif">enter </span><span style="font: 10pt serif">| stackPane codePane contextVarPane contextValuePane instanceVarPane instanceValuePane<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">[enoughpanes⇒ [super enter]<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">NotifyFlag &larr; false.<br></span><span class="tab" val="79"></span><span style="font: italic 10pt serif">"Create the remaining five panes."</span><span style="font: 10pt serif"><br></span><span class="tab" val="79"></span><span style="font: 10pt serif">stackPane &larr; panes◦1. codePane &larr; CodePane new.<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">contextVarPane &larr; VariablePane new. contextValuePane &larr; CodePane new.<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">instanceVarPane &larr; VariablePane new. instanceValuePane &larr; CodePane new.<br></span><span class="tab" val="79"></span><span style="font: italic 10pt serif">"Create the six-paned window."</span><span style="font: 10pt serif"><br></span><span class="tab" val="79"></span><span style="font: 10pt serif">self title: title<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">with: (stackPane, codePane, contextVarPane, contextValuePane, instanceVarPane, instanceValuePane)<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">at: bigTemplates.<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">self frame: frame; show.<br></span><span class="tab" val="79"></span><span style="font: italic 10pt serif">"Initialize the six panes."</span><span style="font: 10pt serif"><br></span><span class="tab" val="79"></span><span style="font: 10pt serif">stackPane context: contextVarPane instance: instanceVarPane code: codePane.<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">codePane from: stackPane.<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">contextVarPane to: contextValuePane. contextValuePane from: contextVarPane.<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">instanceVarPane to: instanceValuePane. instanceValuePane from: instanceVarPane.<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">stackPane select: 0; deselected; fill. enoughpanes &larr; NotifyFlag &larr; true]</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: 10pt serif"></span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: 10pt serif">SystemOrganization classify: ↪NotifyWindow under: &rsquo;Windows&rsquo;.</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: 10pt serif">NotifyWindow classInit</span></div>
<div style="width: 141pt; margin-left: 425pt; margin-top: 0pt; text-align: left">
<span style="font: bold 12pt serif"><br>"ProjectWindow"</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 12pt serif">Class new title: &rsquo;ProjectWindow&rsquo;<br></span><span class="tab" val="79"></span><span style="font: bold 12pt serif">subclassof: Window<br></span><span class="tab" val="79"></span><span style="font: bold 12pt serif">fields: &rsquo;userview parent changes&rsquo;<br></span><span class="tab" val="79"></span><span style="font: bold 12pt serif">declare: &rsquo;actionMenu &rsquo;;<br></span><span class="tab" val="79"></span><span style="font: bold 12pt serif">asFollows</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: italic 10pt serif"><br>A ProjectWindow represents its userview as a window to provide access to many UserViews, each for a different "project".  Besides the state in the userview, they also carry their own hashset for changes, so that such changes can be maintained on a per-project basis.  parent specifies another ProjectWindow to which control is given when the user leaves the current userview</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 12pt serif"><br>Changing views</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 10pt serif">install</span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">"</span><span style="font: italic 10pt serif">Establish this project and its userview as the current screen view</span><span style="font: 10pt serif">"</span><span style="font: bold 10pt serif"><br></span><span class="tab" val="79"></span><span style="font: 10pt serif">[Changes&larr; changes.<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">(user&larr; userview) install.<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">self putTitle.<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">user restart]</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 10pt serif">putTitle<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">[ [titlepara≡nil⇒[titlepara&larr; &rsquo;Top View&rsquo; asParagraph allBold]].<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">titleframe put: titlepara<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">centered: user screenrect extent x/3⌾8.<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">titleframe outline]</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 10pt serif">runParent</span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">"</span><span style="font: italic 10pt serif">leave this view by installing the one above</span><span style="font: 10pt serif">"<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">[parent install]</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 12pt serif"><br>Window behavior</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 10pt serif">close</span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">"break circular links"<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">[userview&larr; parent&larr; nil]</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 10pt serif">yellowbug<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">[actionMenu bug=1⇒[self install]]</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 12pt serif"><br>Initialization</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 10pt serif">classInit<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">[actionMenu &larr; Menu new string: &rsquo;enter&rsquo;]</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 10pt serif">init</span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">"a new window"<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">[self userview: (user copyIn: self)<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">changes: HashSet init<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">parent: user projectWindow.<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">self newframe; show]</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 10pt serif">userview: userview changes: changes parent: parent</span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">"load state"</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: 10pt serif"></span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: 10pt serif">SystemOrganization classify: ↪ProjectWindow under: &rsquo;Windows&rsquo;.</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: 10pt serif">ProjectWindow classInit</span></div>
<div style="width: 141pt; margin-left: 425pt; margin-top: 0pt; text-align: left">
<span style="font: bold 12pt serif"><br>"SyntaxWindow"</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 12pt serif">Class new title: &rsquo;SyntaxWindow&rsquo;<br></span><span class="tab" val="79"></span><span style="font: bold 12pt serif">subclassof: PanedWindow<br></span><span class="tab" val="79"></span><span style="font: bold 12pt serif">fields: &rsquo;&rsquo;<br></span><span class="tab" val="79"></span><span style="font: bold 12pt serif">declare: &rsquo;stdFrame stdTemplates &rsquo;;<br></span><span class="tab" val="79"></span><span style="font: bold 12pt serif">asFollows</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: italic 10pt serif"><br>I am a paned window with a stack pane and a code pane to report errors during non-interactive compilations, e.g., filin, ⓢ, understands.</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 12pt serif"><br>Initialization</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 10pt serif">classInit<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">[stdTemplates &larr; (0⌾0 rect: 12⌾36), (12⌾0 rect: 36⌾36).<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">stdFrame &larr; 60⌾320 rect: 570⌾500]</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 10pt serif">of: errorString at: position in: stream for: class from: context </span><span style="font: 10pt serif">| stackPane codePane<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">[stackPane &larr; StackPane new.<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">codePane &larr; CodePane new class: class selector: nil para: nil.<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">self title: class title with: (stackPane, codePane) at: stdTemplates.<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">stdFrame moveto: (user screenrect center-(stdFrame extent/2)).<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">self frame: (self fixframe: stdFrame); show.<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">stackPane context: false instance: false code: codePane.<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">stackPane of: context inVector.<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">codePane showing: stream asArray.<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">codePane from: stackPane; notify: errorString at: position in: stream]</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: 10pt serif"></span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt;