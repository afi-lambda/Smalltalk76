<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN">
<html>
  <head>
    <meta http-equiv="Content-type" content="text/html;charset=UTF-8">
    <title>Smalltalk76/Paragraph-printing.st</title>
  </head>
  <body>
    <div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: 10pt serif">&rsquo;From Smalltalk 5.5k XM November 24 on 22 November 1980 at 2:57:08 am.&rsquo;<br></span></div>
<div style="width: 141pt; margin-left: 425pt; margin-top: 0pt; text-align: left">
<span style="font: bold 12pt serif">"ParagraphPrinter"</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 12pt serif">Class new title: &rsquo;ParagraphPrinter&rsquo;<br></span><span class="tab" val="79"></span><span style="font: bold 12pt serif">subclassof: Object<br></span><span class="tab" val="79"></span><span style="font: bold 12pt serif">fields: &rsquo;frame "&lt;Rectangle&gt; usable area on page"<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: bold 12pt serif">leading "&lt;Integer&gt; paragraph leading"<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: bold 12pt serif">style "&lt;TextStyle&gt; for paragraphs"<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: bold 12pt serif">strm "&lt;Stream&gt; for output"<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: bold 12pt serif">&rsquo;<br></span><span class="tab" val="79"></span><span style="font: bold 12pt serif">declare: &rsquo;defaultframe defaultleading &rsquo;;<br></span><span class="tab" val="79"></span><span style="font: bold 12pt serif">asFollows</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: italic 10pt serif"><br>Provides a stream-like interface for printing a succession of paragraphs on a Bravo or Press file.  The margins, leading, and style are settable instance variables.  BravoPrinter and PressPrinter each override some messages</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 12pt serif"><br>Initialization</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 10pt serif">classInit </span><span style="font: 10pt serif">| inch<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">[inch &larr; 2540.</span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: italic 10pt serif">"1 inch in micas"</span><span style="font: 10pt serif"><br></span><span class="tab" val="79"></span><span style="font: 10pt serif">defaultframe &larr;<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">(0.75*inch) asInteger⌾(1*inch) rect: (7.75*inch) asInteger⌾(10*inch).<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">defaultleading &larr; 0]</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 10pt serif">init<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">[self frame &larr; self defaultframe.<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">self leading &larr; defaultleading.<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">self style &larr; DefaultTextStyle]</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 10pt serif">of: strm</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 12pt serif"><br>Access to state</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 10pt serif">defaultframe </span><span style="font: 10pt serif">[⇑defaultframe]</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 10pt serif">defaultleading </span><span style="font: 10pt serif">[⇑defaultleading]</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 10pt serif">frame </span><span style="font: 10pt serif">[⇑frame]</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 10pt serif">frame &larr; frame</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 10pt serif">leading &larr; leading</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 10pt serif">style &larr; style</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 12pt serif"><br>Writing</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 10pt serif">print: para</span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: italic 10pt serif">"A dummy, subclasses will override"</span><span style="font: 10pt serif"><br></span><span class="tab" val="79"></span><span style="font: 10pt serif">[strm append: para text]</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 12pt serif"><br>Class stuff</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 10pt serif">printchanges: lis </span><span style="font: 10pt serif">| selector class heading old mes s delFlg<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">"</span><span style="font: italic 10pt serif">prints Changes format:</span><span style="font: 10pt serif"> (&rsquo;class message&rsquo; &rsquo;class message&rsquo; ...)<br></span><span class="tab" val="79"></span><span style="font: italic 10pt serif">or alternate format:</span><span style="font: 10pt serif"> (class (message ...) class () ...) </span><span style="font: italic 10pt serif">or both<br></span><span class="tab" val="79"></span><span style="font: italic 10pt serif">If an element appears in the list of the form &rsquo;~class message&rsquo;, this puts out a <br></span><span class="tab" val="79"></span><span style="font: italic 10pt serif">line causing the system to forget that method.  These come after any additons,<br></span><span class="tab" val="79"></span><span style="font: italic 10pt serif">owing to the sort on Changes"</span><span style="font: 10pt serif"><br>  [lis empty⇒ [⇑lis]<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">user displayoffwhile⦂ [<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">lis &larr; lis asStream.<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">old &larr; mes &larr; false.<br><br></span><span class="tab" val="79"></span><span style="font: 10pt serif">while⦂ class do⦂ [<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">"</span><span style="font: italic 10pt serif">get next class, selector pair</span><span style="font: 10pt serif">"<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">[delFlg&larr; false.<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">mes and⦂ (selector &larr; mes next)⇒ ["</span><span style="font: italic 10pt serif">more of alternate form</span><span style="font: 10pt serif">"]<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">s &larr; lis next⇒ [<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">s is: UniqueString⇒ [<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">class &larr; Smalltalk lookup: s.<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">mes &larr; lis next asStream.<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">selector &larr; mes next]<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">"</span><span style="font: italic 10pt serif">Changes format</span><span style="font: 10pt serif">"<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">s &larr; s asStream.<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">[s peek=126 "~"⇒[s next. "take it off stream" delFlg&larr; true]].<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">class &larr; Smalltalk◦(s upto: 040) unique.<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">selector &larr; s upto: 040.]<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">class &larr; false].<br><br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">delFlg⇒[self printForget: selector class: class]<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">"same, different or no class"<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">[old ≡ class⇒ []<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">[old⇒ [old endCategoryOn: self; endChangesOn: self]].<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">class ≡ false⇒ ["</span><span style="font: italic 10pt serif">finished</span><span style="font: 10pt serif">"]<br><br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">user cr; show: class title.<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">old &larr; class.<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">class startChangesOn: self.<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">heading &larr; &rsquo;As yet unclassified&rsquo;].<br><br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">class≡false⇒ []<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">user space; show: selector.<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">s &larr; class organization invert: (selector &larr; selector unique).<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">s⇒[[s ≠ heading⇒[class startCategory: (heading &larr; s) on: self]].<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">class printMethod: selector on: self]]]]</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 10pt serif">printclass: class </span><span style="font: 10pt serif">| c first [<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">class is: Vector⇒ [<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">first &larr; true.<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">for⦂ c from: class do⦂ [<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">[first⇒ [first &larr; false] self nextpage].<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">self printclass: c]]<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">user displayoffwhile⦂ [<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">[class is: UniqueString⇒<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">[class &larr; Smalltalk◦class]].<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">user cr; show: class title.<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">class paraprinton: self]]</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 10pt serif">printForget: selector class: class<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">"Print a line that causes a message to be forgotten"<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">[user cr; show: &rsquo;~&rsquo;+class title+&rsquo; &rsquo;+selector.<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">self print:<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">(class title + &rsquo; derstands: ↪&rsquo; + selector + &rsquo;.<br>&rsquo;) asParagraph]</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 10pt serif">stamp </span><span style="font: 10pt serif">| s t [<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">t &larr; user now "date and time".<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">s &larr; Stream default.<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">s append: &rsquo;&rsquo;&rsquo;From &rsquo;; append: user version;<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">append: &rsquo; on &rsquo;; print: t◦1;<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">append: &rsquo; at &rsquo;; print: t◦2;<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">append: &rsquo;.&rsquo;&rsquo;&rsquo;; cr.<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">self print: s contents asParagraph]</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 12pt serif"><br>Closing</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 10pt serif">close </span><span style="font: 10pt serif">[strm close]</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: 10pt serif"></span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: 10pt serif">SystemOrganization classify: ↪ParagraphPrinter under: &rsquo;Paragraph printing&rsquo;.</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: 10pt serif">ParagraphPrinter classInit</span></div>
<div style="width: 141pt; margin-left: 425pt; margin-top: 0pt; text-align: left">
<span style="font: bold 12pt serif"><br>"BravoPrinter"</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 12pt serif">Class new title: &rsquo;BravoPrinter&rsquo;<br></span><span class="tab" val="79"></span><span style="font: bold 12pt serif">subclassof: ParagraphPrinter<br></span><span class="tab" val="79"></span><span style="font: bold 12pt serif">fields: &rsquo;eject "Eject page before next paragraph if true"<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: bold 12pt serif">&rsquo;<br></span><span class="tab" val="79"></span><span style="font: bold 12pt serif">declare: &rsquo;&rsquo;;<br></span><span class="tab" val="79"></span><span style="font: bold 12pt serif">asFollows</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: italic 10pt serif"><br>Prints Paragraphs in Bravo format</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 12pt serif"><br>Initialization</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 10pt serif">init<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">[super init.  eject &larr; false]</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 12pt serif"><br>Writing</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 10pt serif">eject<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">[strm next &larr; 014; cr]</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 10pt serif">nextpage<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">[eject⇒ [self eject] eject &larr; true]</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 10pt serif">print: para </span><span style="font: 10pt serif">| l r<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">[[eject⇒ [self eject. eject &larr; false]].<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">strm append: para text; next&larr; 032.</span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: italic 10pt serif">"&uarr;Z"</span><span style="font: 10pt serif"><br></span><span class="tab" val="79"></span><span style="font: 10pt serif">l &larr; frame origin x.<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">r &larr; frame corner x.<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">[l≠self defaultframe origin x⇒<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">[strm append: &rsquo;l&rsquo;; print: l]].<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">[r≠self defaultframe corner x⇒<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">[strm append: &rsquo;z&rsquo;; print: r]].<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">[leading≠self defaultleading⇒<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">[strm append: &rsquo;e&rsquo;; print: leading]].<br><br></span><span class="tab" val="79"></span><span style="font: 10pt serif">"any other run info and cr"<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">para bravoRuns: strm.<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">]</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: 10pt serif"></span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: 10pt serif">SystemOrganization classify: ↪BravoPrinter under: &rsquo;Paragraph printing&rsquo;.</span></div>
<div style="width: 141pt; margin-left: 425pt; margin-top: 0pt; text-align: left">
<span style="font: bold 12pt serif"><br>"PressPrinter"</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 12pt serif">Class new title: &rsquo;PressPrinter&rsquo;<br></span><span class="tab" val="79"></span><span style="font: bold 12pt serif">subclassof: ParagraphPrinter<br></span><span class="tab" val="79"></span><span style="font: bold 12pt serif">fields: &rsquo;page "&lt;Integer&gt; current page number"<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: bold 12pt serif">ypos "&lt;Integer&gt; current y position on page"<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: bold 12pt serif">press "&lt;PressFile&gt; for output"<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: bold 12pt serif">&rsquo;<br></span><span class="tab" val="79"></span><span style="font: bold 12pt serif">declare: &rsquo;defaultframe &rsquo;;<br></span><span class="tab" val="79"></span><span style="font: bold 12pt serif">asFollows</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: italic 10pt serif"><br>Prints Paragraphs in Press format</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 12pt serif"><br>Initialization</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 10pt serif">classInit </span><span style="font: 10pt serif">| inch<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">[inch &larr; 2540.</span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">"1 inch in micas"<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">defaultframe &larr;<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">(1.1*inch) asInteger⌾(1*inch) rect: (7.75*inch) asInteger⌾(10*inch)]</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 10pt serif">defaultframe </span><span style="font: 10pt serif">[⇑defaultframe]</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 10pt serif">init </span><span style="font: 10pt serif">[super init. page &larr; 1. ypos &larr; frame maxY]</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 10pt serif">of: strm </span><span style="font: 10pt serif">[press &larr; PressFile new of: strm]</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 10pt serif">press: press</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 12pt serif"><br>Writing</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 10pt serif">nextpage </span><span style="font: 10pt serif">[self nextpage: true]</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 10pt serif">nextpage: h </span><span style="font: 10pt serif">| n [<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">press page.<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">page &larr; page+1.<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">ypos &larr; frame maxY.<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">h⇒ [<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">n &larr; page asString.<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">press setp: frame maxX+800 ⌾ (ypos + 960);<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">selectfont: (press fontindex: 0 style: DefaultTextStyle) - 1;<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">append: n;<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">showchars: n length]]</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 10pt serif">print: para </span><span style="font: 10pt serif">[<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">self print: para in: (<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">Rectangle new origin: frame origin corner: frame maxX ⌾ ypos)]</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 10pt serif">print: para in: rect </span><span style="font: 10pt serif">| result oldpara [<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">[rect width = 0 or⦂ rect height = 0⇒ [user notify: &rsquo;zero dimension&rsquo;]].<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">"</span><span style="font: italic 10pt serif">para is a Paragraph-like object (TextImage, Form, etc.)</span><span style="font: 10pt serif">"<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">oldpara &larr; para.<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">until⦂ ((result &larr; para presson: press in: rect) is: Integer) do⦂ [<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">"</span><span style="font: italic 10pt serif">rest of para goes on next page</span><span style="font: 10pt serif">"<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">self nextpage.<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">para &larr; result.<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">rect &larr; rect minX ⌾ frame minY rect: rect maxX ⌾ ypos].<br><br></span><span class="tab" val="79"></span><span style="font: 10pt serif">"</span><span style="font: italic 10pt serif">original para can hide information. if it split across page boundaries,<br></span><span class="tab" val="79"></span><span style="font: italic 10pt serif">the format may vary. other completion flags can be added later</span><span style="font: 10pt serif">"<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">oldpara hidePress: press complete: [oldpara≡para⇒ [0] 1].<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">⇑ypos &larr; result]</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 12pt serif"><br>Closing</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 10pt serif">close<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">[press close]</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 10pt serif">toPrinter </span><span style="font: 10pt serif">[press toPrinter]</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 12pt serif"><br>Projector behavior</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: 10pt serif"></span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: 10pt serif">SystemOrganization classify: ↪PressPrinter under: &rsquo;Paragraph printing&rsquo;.</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: 10pt serif">PressPrinter classInit</span></div>
<script>function do_tabs() { // unit = px
  var tabs = document.getElementsByClassName("tab");
  for (var i = 0; i < tabs.length; ++i) {
    var span = tabs[i];
    var val = span.getAttribute("val");
    if (val == null) console.log("Couldn't get val");
    var rect = span.getBoundingClientRect();
    var tabstop;
    if (val > 0) tabstop = Math.ceil(rect.left / val) * val;
    else tabstop = -val;
    console.log("do_tabs", val, tabstop)
    if (tabstop > 0) {
      var width = tabstop - rect.left;
      span.style.display = "inline-block";
      span.style.width = width + "px";
    }
  }
}
do_tabs();
</script>
  </body>
</html>
