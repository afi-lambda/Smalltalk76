<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN">
<html>
  <head>
    <meta http-equiv="Content-type" content="text/html;charset=UTF-8">
    <title>Smalltalk76/Graphical-Objects.st</title>
  </head>
  <body>
    <div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: 10pt serif">&rsquo;From Smalltalk 5.5k XM November 24 on 5 February 2037 at 10:51:09 pm.&rsquo;<br></span></div>
<div style="width: 141pt; margin-left: 425pt; margin-top: 0pt; text-align: left">
<span style="font: bold 12pt serif">"Cursor"</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 12pt serif">Class new title: &rsquo;Cursor&rsquo;<br></span><span class="tab" val="79"></span><span style="font: bold 12pt serif">subclassof: Object<br></span><span class="tab" val="79"></span><span style="font: bold 12pt serif">fields: &rsquo;bitstr offset&rsquo;<br></span><span class="tab" val="79"></span><span style="font: bold 12pt serif">declare: &rsquo;&rsquo;;<br></span><span class="tab" val="79"></span><span style="font: bold 12pt serif">asFollows</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: italic 10pt serif"><br>I am a 16 x 16 dot matrix suitable for use as the Alto hardware cursor</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 12pt serif"><br>Initialization</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 10pt serif">fromString: bitstr </span><span style="font: 10pt serif">[self fromString: bitstr offset: 0⌾0]</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 10pt serif">fromString: bitstr offset: offset</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 10pt serif">fromtext: str </span><span style="font: 10pt serif">[self fromtext: str offset: 0⌾0]</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 10pt serif">fromtext: str offset: offset </span><span style="font: 10pt serif">| i s n c [<br></span><span class="tab" val="79"></span><span style="font: italic 10pt serif">"Not great, but compatible with printon."</span><span style="font: 10pt serif"><br></span><span class="tab" val="79"></span><span style="font: 10pt serif">bitstr &larr; String new: 32.<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">s &larr; str asStream.  s next.<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">for⦂ i to: 16 do⦂<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">[n &larr; 0.<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">while⦂ ((c &larr; s next)=060 or⦂ c=061) do⦂<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">[n &larr; (n lshift: 1)+(c-060)].<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">bitstr word: i &larr; n]]</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 10pt serif">offset: offset</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 12pt serif"><br>Hardware cursor</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 10pt serif">frompage1</span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: italic 10pt serif">"load this cursor from the hardware locations"</span><span style="font: 10pt serif"><br></span><span class="tab" val="79"></span><span style="font: 10pt serif">[bitstr &larr; String new: 32.<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">BitBlt new forCursor; sourcebase&larr; 0431; destbase &larr; bitstr; copy: storing]</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 12pt serif"><br>Conversion</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 10pt serif">hardcopy: pf </span><span style="font: 10pt serif">["use current cursor position"<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">self hardcopy: pf at: user mp - offset]</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 10pt serif">hardcopy: pf at: loc </span><span style="font: 10pt serif">| rect [<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">"print cursor image at some point location into a presssfile"<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">rect &larr; loc extent: 16⌾16.<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">pf setp: (pf transrect: rect) origin; bitmap: rect bits: bitstr]</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 10pt serif">printon: strm </span><span style="font: 10pt serif">| i<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">[strm append: &rsquo;Cursor new fromtext: &rsquo;&rsquo;&rsquo;.<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">for⦂ i to: 16 do⦂<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">[strm cr.<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">(bitstr word: i) printon: strm base: 2]<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">strm append: &rsquo;&rsquo;&rsquo; offset: &rsquo;; print: offset; append: &rsquo;.&rsquo;]</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 12pt serif"><br>Aspects</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 10pt serif">offset </span><span style="font: 10pt serif">[⇑offset]</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 12pt serif"><br>Showing</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 10pt serif">show</span><span class="tab" val="79"></span><span style="font: bold 10pt serif"> </span><span style="font: 10pt serif">[<br></span><span class="tab" val="79"></span><span style="font: italic 10pt serif">"copy this cursor into the page 1 hardware locations"<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">BitBlt new forCursor; destbase&larr; 0431; sourcebase &larr; bitstr; copy: storing.<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">user currentCursor: self<br><br></span><span class="tab" val="79"></span><span style="font: 10pt serif">"the following statement will copy back if we ever need to"<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">"BitBlt new forCursor; sourcebase&larr; 0431; destbase &larr; bitstr; copy: storing"]</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 10pt serif">showwhile⦂ expr </span><span style="font: 10pt serif">| oldcursor value [<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">oldcursor &larr; user currentCursor.<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">self show.<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">value &larr; expr eval.<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">oldcursor show.<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">⇑value]</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 12pt serif"><br>Compatibility</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 10pt serif">topage1</span><span class="tab" val="79"></span><span style="font: 10pt serif">[self show]</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: 10pt serif"></span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: 10pt serif">SystemOrganization classify: ↪Cursor under: &rsquo;Graphical Objects&rsquo;.</span></div>
<div style="width: 141pt; margin-left: 425pt; margin-top: 0pt; text-align: left">
<span style="font: bold 12pt serif"><br>"HalfToner"</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 12pt serif">Class new title: &rsquo;HalfToner&rsquo;<br></span><span class="tab" val="79"></span><span style="font: bold 12pt serif">subclassof: Object<br></span><span class="tab" val="79"></span><span style="font: bold 12pt serif">fields: &rsquo;lines pixelsPerLine black white errorString rect vect inpix outpix nlines npix strm inset&rsquo;<br></span><span class="tab" val="79"></span><span style="font: bold 12pt serif">declare: &rsquo;&rsquo;;<br></span><span class="tab" val="79"></span><span style="font: bold 12pt serif">asFollows</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: italic 10pt serif"><br>This class converts ais image files to screen bits</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 12pt serif"><br>AIS to Bits</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 10pt serif">decode: str using: s </span><span style="font: 10pt serif">| i j k x cascadeRight cascadeDiag val error r msk masks<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">["</span><span style="font: italic 10pt serif">Change 8-bit grey from str filling s"</span><span style="font: 10pt serif"><br></span><span class="tab" val="79"></span><span style="font: 10pt serif"> masks&larr;↪(128 64 32 16 8 4 2 1).<br></span><span class="tab" val="79"></span><span style="font: 10pt serif"> cascadeRight&larr;0.<br></span><span class="tab" val="79"></span><span style="font: 10pt serif"> cascadeDiag&larr;errorString◦1.<br></span><span class="tab" val="79"></span><span style="font: 10pt serif"> i&larr;msk&larr;j&larr;k&larr;1. x&larr;0-outpix.<br></span><span class="tab" val="79"></span><span style="font: 10pt serif"> s◦1&larr;0.<br></span><span class="tab" val="79"></span><span style="font: 10pt serif"> for⦂ i to: pixelsPerLine do⦂<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">[while⦂ x&lt;0 do⦂<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">[val&larr;(str◦i)-black.<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">[(error&larr;cascadeRight-val)≥0⇒<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">[</span><span style="font: italic 10pt serif">"print Black"</span><span style="font: 10pt serif"> s◦j&larr;masks◦msk+(s◦j). (error&gt;white)⇒[error&larr;white] ]<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: italic 10pt serif">"print White"</span><span style="font: 10pt serif"> (error&larr;error+white)&lt;0⇒[error&larr;0] ].<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">error&larr;error/2.<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">val&larr;error/2.<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">errorString◦k&larr;cascadeDiag+val.<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">cascadeRight&larr;errorString◦(k+1)+error.<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">cascadeDiag&larr;val.<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">[(msk&larr;msk+1)&gt;8⇒[msk&larr;1. j&larr;j+1. s◦j&larr;0] ].<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">x&larr;x+inpix. k&larr;k+1].<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">x&larr;x-outpix].<br></span><span class="tab" val="79"></span><span style="font: bold 10pt serif">⇑s</span><span style="font: 10pt serif">]  primitive: 109</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 10pt serif">doFile </span><span style="font: 10pt serif">| str i s2 r y skipsum<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">[str&larr;String new: pixelsPerLine.<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">r&larr;0⌾0 rect: (pixelsPerLine*outpix/inpix)⌾1. r moveto: rect origin copy.<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">s2&larr;String new: 1+((pixelsPerLine*outpix)/(8*inpix)).<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">vect&larr;Vector new: lines. strm reset; position&larr;2048+(inset y*npix). </span><span style="font: italic 10pt serif">"crop top"</span><span style="font: 10pt serif"><br></span><span class="tab" val="79"></span><span style="font: 10pt serif">i&larr;1. y&larr;0-outpix. skipsum&larr;0.<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">while⦂ i≤lines do⦂<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">[skipsum&larr;skipsum+inset x. </span><span style="font: italic 10pt serif">"inset left"</span><span style="font: 10pt serif"><br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">strm skip: skipsum. skipsum&larr;0. </span><span style="font: italic 10pt serif">"do all tallied skips prior to next read"</span><span style="font: 10pt serif"><br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">strm into: str endError: true.<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">r bitsFromString: (self decode: str using: s2).<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">skipsum&larr;skipsum+npix-(pixelsPerLine+inset x).<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">r origin y&larr;r origin y+1. r corner y&larr;r corner y+1.<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">[(y&larr;y+inpix)≥0⇒ </span><span style="font: italic 10pt serif">"next line?"</span><span style="font: 10pt serif"><br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">[i&larr;i+1. y&larr;y-outpix.<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">while⦂ (y≥0 and⦂ i≤lines) do⦂ [i&larr;i+1. y&larr;y-outpix. skipsum&larr;skipsum+npix] ]<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">skipsum&larr;skipsum-npix] ]. </span><span style="font: italic 10pt serif">"not next line"</span><span style="font: 10pt serif"><br></span><span class="tab" val="79"></span><span style="font: 10pt serif">strm close]</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 10pt serif">intoPress: p file: f </span><span style="font: 10pt serif">| outrect </span><span style="font: italic 10pt serif">"Creates an external file reference"</span><span style="font: 10pt serif"><br></span><span class="tab" val="79"></span><span style="font: 10pt serif">[outrect&larr;p transrect: rect.<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">p setp: (outrect origin); dots⦂<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">[p setcoding: 8 </span><span style="font: italic 10pt serif">"byte samples"</span><span style="font: 10pt serif"> dots: npix lines: nlines;<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">setmode: 3 </span><span style="font: italic 10pt serif">"to right and to bottom of page"</span><span style="font: 10pt serif">;<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">setwindowwidth: pixelsPerLine height: lines<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">skipdots: (inset x) skiplines: (inset y);<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">setsizewidth: (outrect width) height: (outrect height);<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">dotsfromAIS: f] ]<br>"<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">|p. p&larr;dp0 pressfile: &rsquo;pix.press&rsquo;.<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">p pictureinit. (HalfToner new test) intoPress: p file: &rsquo;Rolfup.AIS&rsquo;. p close.<br>"</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 10pt serif">setup | i r1 r2 inset done</span><span style="font: 10pt serif">"set up default paramsHalfToner new doFile."<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">[user print: &rsquo;Black? (0-255)&rsquo;. black &larr; user read asVector◦1.<br></span><span class="tab" val="79"></span><span style="font: 10pt serif"> user print: &rsquo;White? (0-255)&rsquo;. white &larr; user read asVector◦1.<br></span><span class="tab" val="79"></span><span style="font: 10pt serif"> white &larr; white-black max: 255.<br></span><span class="tab" val="79"></span><span style="font: 10pt serif"> [white&gt;255⇒[white &larr; 255]].<br></span><span class="tab" val="79"></span><span style="font: 10pt serif"> r1 &larr; 0⌾0 rect: pixelsPerLine⌾lines. <br></span><span class="tab" val="79"></span><span style="font: 10pt serif"> user print: &rsquo;Position whole &rsquo;.<br></span><span class="tab" val="79"></span><span style="font: 10pt serif"> until⦂ user anybug do⦂ [r1 moveto: user mp. r1 comp. r1 comp].<br></span><span class="tab" val="79"></span><span style="font: 10pt serif"> user waitnobug. r1 comp. "show whole"<br></span><span class="tab" val="79"></span><span style="font: 10pt serif"> user print: &rsquo; Show cropping &rsquo;.<br></span><span class="tab" val="79"></span><span style="font: 10pt serif"> r2 &larr; Rectangle new fromuser intersect: r1. r1 comp.<br></span><span class="tab" val="79"></span><span style="font: 10pt serif"> inset &larr; r2 origin - r1 origin. <br></span><span class="tab" val="79"></span><span style="font: 10pt serif"> pixelsPerLine &larr; pixelsPerLine min: r2 width.<br></span><span class="tab" val="79"></span><span style="font: 10pt serif"> lines &larr; lines min: r2 height.<br></span><span class="tab" val="79"></span><span style="font: 10pt serif"> done &larr; false.<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">until⦂ done do⦂<br></span><span class="tab" val="79"></span><span style="font: 10pt serif"> [user print: &rsquo; Position it &rsquo;.<br></span><span class="tab" val="79"></span><span style="font: 10pt serif"> rect &larr; Rectangle new fromuser.<br></span><span class="tab" val="79"></span><span style="font: 10pt serif"> [rect width&gt;r2 width⇒["blowup" inpix &larr; 8. outpix &larr; (8*rect width/r2 width)]<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">"shrink" outpix &larr; 8. inpix &larr; (8*r2 width/rect width)].<br></span><span class="tab" val="79"></span><span style="font: 10pt serif"> rect extent &larr; r2 extent * outpix / inpix.<br></span><span class="tab" val="79"></span><span style="font: 10pt serif"> rect comp. user print: &rsquo;ok? (redbug)&rsquo;.<br></span><span class="tab" val="79"></span><span style="font: 10pt serif"> until⦂ user anybug do⦂ []. [user redbug⇒[done &larr; true]]. user waitnobug.<br></span><span class="tab" val="79"></span><span style="font: 10pt serif"> rect comp].<br></span><span class="tab" val="79"></span><span style="font: 10pt serif"> errorString &larr; String new: pixelsPerLine*outpix / inpix+1.<br></span><span class="tab" val="79"></span><span style="font: 10pt serif"> for⦂ i to: errorString length do⦂ [errorString◦i &larr; 0].<br></span><span class="tab" val="79"></span><span style="font: 10pt serif"> ⇑inset "return inset"<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">]</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 12pt serif"><br>Init/Access</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 10pt serif">nlines </span><span style="font: 10pt serif">[</span><span style="font: bold 10pt serif">⇑nlines</span><span style="font: 10pt serif">]</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 10pt serif">npix </span><span style="font: 10pt serif">[</span><span style="font: bold 10pt serif">⇑npix</span><span style="font: 10pt serif">]</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 10pt serif">rect </span><span style="font: 10pt serif">[</span><span style="font: bold 10pt serif">⇑rect</span><span style="font: 10pt serif">]</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 10pt serif">rect&larr;rect</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 10pt serif">setup: strm </span><span style="font: 10pt serif">| inrect croprect<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">[strm readonly.<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">(strm word: 2)≠1024 or⦂ (strm word: 9)≠8⇒[user notify: &rsquo;bad file&rsquo;]<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">nlines&larr;lines&larr;strm word: 4. npix&larr;pixelsPerLine&larr;strm nextword.<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">black&larr;0. white&larr;255.<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">inrect&larr;0⌾0 rect: pixelsPerLine⌾lines. inrect moveto: rect origin.<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">inrect usermove; comp. </span><span style="font: italic 10pt serif">"show whole"</span><span style="font: 10pt serif"><br></span><span class="tab" val="79"></span><span style="font: 10pt serif">croprect&larr;rect copy. croprect moveto: inrect origin copy. croprect maxstretch: inrect.<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">croprect userstretch: inrect. inrect comp.<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">inset&larr;croprect origin-inrect origin.<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">pixelsPerLine&larr;croprect width. lines&larr;pixelsPerLine*rect height/rect width.<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">[rect width&gt;pixelsPerLine⇒<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">[</span><span style="font: italic 10pt serif">"blowup"</span><span style="font: 10pt serif"> inpix&larr;32. outpix&larr;(32*rect width/pixelsPerLine)]<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: italic 10pt serif">"shrink"</span><span style="font: 10pt serif"> outpix&larr;32. inpix&larr;(32*pixelsPerLine/rect width)].<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">errorString&larr;String new: pixelsPerLine*outpix/inpix+2.<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">errorString all&larr;0]</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 10pt serif">strm </span><span style="font: 10pt serif">[</span><span style="font: bold 10pt serif">⇑strm</span><span style="font: 10pt serif">]</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 10pt serif">test </span><span style="font: 10pt serif">| files<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">[files&larr;(dp0 filesMatching: &rsquo;*.ais.&rsquo;) sort.<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">files empty⇒[user notify: &rsquo;no .ais files on disk&rsquo;]<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">strm&larr;dp0 file: (files◦(Menu new stringFromVector: files) zbug). strm readonly.<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">rect&larr;Rectangle new usersize. self setup: strm; doFile]<br>"<br>HalfToner new test.<br>"</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: 10pt serif"></span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: 10pt serif">SystemOrganization classify: ↪HalfToner under: &rsquo;Graphical Objects&rsquo;.</span></div>
<div style="width: 141pt; margin-left: 425pt; margin-top: 0pt; text-align: left">
<span style="font: bold 12pt serif"><br>"Turtle"</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 12pt serif">Class new title: &rsquo;Turtle&rsquo;<br></span><span class="tab" val="79"></span><span style="font: bold 12pt serif">subclassof: Object<br></span><span class="tab" val="79"></span><span style="font: bold 12pt serif">fields: &rsquo;pen ink width dir x xf y yf frame&rsquo;<br></span><span class="tab" val="79"></span><span style="font: bold 12pt serif">declare: &rsquo;&rsquo;;<br></span><span class="tab" val="79"></span><span style="font: bold 12pt serif">asFollows</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: italic 10pt serif"><br>Turtles can crawl around the screen drawing and printing at any angle.<br>Dont forget to send them the message init before any drawing commands.</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 12pt serif"><br>Initialization</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 10pt serif">erase<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">[frame clear: white]</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 10pt serif">frame </span><span style="font: 10pt serif">[⇑frame]</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 10pt serif">frame: frame</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 10pt serif">init<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">[pen &larr; width &larr; 1.<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">x&larr; y&larr; xf&larr; yf&larr; 0.<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">frame &larr; user screenrect.<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">self black; home]</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 12pt serif"><br>Pen Control</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 10pt serif">black </span><span style="font: 10pt serif">[ink &larr; black]</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 10pt serif">color: ignored  </span><span style="font: 10pt serif">"Only implemented for PressTurtle"</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 10pt serif">ink: ink</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 10pt serif">pen: pen</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 10pt serif">pendn<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">[pen &larr; 1]</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 10pt serif">penup<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">[pen &larr; 0]</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 10pt serif">white </span><span style="font: 10pt serif">[ink &larr; white]</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 10pt serif">width </span><span style="font: 10pt serif">[⇑width]</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 10pt serif">width: width</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 10pt serif">xor </span><span style="font: 10pt serif">[ink &larr; 2]</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 12pt serif"><br>Drawing</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 10pt serif">fillIn⦂ expr </span><span style="font: 10pt serif">[⇑expr eval]  "Only implemented for PressTurtle"</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 10pt serif">go: length </span><span style="font: 10pt serif">[user croak] primitive: 53</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 10pt serif">goto: pt<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">[pt x is: Integer⇒[user croak]<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">self goto: pt x asInteger⌾pt y asInteger] primitive: 54</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 10pt serif">home</span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: bold 10pt serif"><br></span><span class="tab" val="79"></span><span style="font: 10pt serif">[self up; place: frame center-frame origin. xf&larr; yf&larr; 0100000]</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 10pt serif">place </span><span style="font: 10pt serif">[⇑x⌾y]</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 10pt serif">place: pt </span><span style="font: 10pt serif">| p</span><span style="font: bold 10pt serif"><br></span><span class="tab" val="79"></span><span style="font: 10pt serif">[p&larr; pen. pen&larr; 0. self goto: pt. pen&larr; p]</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 10pt serif">pointAt: pt </span><span style="font: 10pt serif">| diff "change direction so turtle points at pt."<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">[diff &larr; (pt - (self place)).<br></span><span class="tab" val="79"></span><span style="font: 10pt serif"> dir &larr; ((diff theta) asInteger)]<br><br></span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 10pt serif">stretchto: pt </span><span style="font: 10pt serif">| t old<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">[t &larr; Turtle init frame: frame. old &larr; x⌾y. <br></span><span class="tab" val="79"></span><span style="font: 10pt serif">t xor; place: old; goto: pt; place: old; goto: pt]</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 10pt serif">turn: angle<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">[dir&larr; dir+angle\360]</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 10pt serif">up</span><span class="tab" val="79"></span><span style="font: bold 10pt serif"> </span><span style="font: 10pt serif">[dir &larr; 270]</span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: italic 10pt serif">"Point toward top of screen"</span><span style="font: bold 10pt serif"><br></span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 12pt serif"><br>Text</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 10pt serif">put: char font: font</span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: italic 10pt serif">"char=ascii Integer, font=font bits (String)"</span><span style="font: bold 10pt serif"><br></span><span class="tab" val="79"></span><span style="font: 10pt serif">[user croak] primitive: 56</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 10pt serif">show: str font: font </span><span style="font: 10pt serif">| a f</span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: italic 10pt serif">"str=text (String), font=font number (0-9)"</span><span style="font: 10pt serif"><br></span><span class="tab" val="79"></span><span style="font: 10pt serif">[f&larr; DefaultTextStyle fonts◦(font+1).<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">for⦂ a from: str do⦂<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">[self put: a font: f]]</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 12pt serif"><br>Examples</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 10pt serif">dragon: n<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">[n=0⇒[self go: 10]<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">n&gt;0⇒[self dragon: n-1; turn: 90; dragon: 1-n]<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">self dragon: ¬1-n; turn: ¬90; dragon: 1+n]<br>"<br>Turtle init dragon: 8<br>"</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 10pt serif">filberts: order side: s </span><span style="font: 10pt serif">| i n2<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">[n2&larr; 1 lshift: order-1.<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">self penup; go: 0-n2*s; pendn.<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">for⦂ i to: 4 do⦂<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">[self color: i-1*40.<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">self fillIn⦂ [self hilbert: order side: s; go: s; hilbert: order side: s; go: s].<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">self black; hilbert: order side: s; go: s; hilbert: order side: s; go: s.<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">self penup; go: n2-1*s; turn: ¬90; go: n2*s; turn: 180; pendn]]<br>"<br>Turtle init erase filberts: 3 side: 10.<br><br>user displayoffwhile⦂<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">[PressTurtle new init: &rsquo;try.press&rsquo;; filberts: 4 side: 10; close].<br>"</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 10pt serif">hilbert: n side: s </span><span style="font: 10pt serif">| a m<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">[n=0⇒[self turn: 180]<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">[n&gt;0⇒[a&larr;90. m&larr;n-1] a&larr;¬90. m&larr;n+1].<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">self turn: a; hilbert: 0-m side: s; turn: a.<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">self go: s; hilbert: m side: s;<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">turn: 0-a; go: s; turn: 0-a;<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">hilbert: m side: s; go: s.<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">self turn: a; hilbert: 0-m side: s; turn: a]<br>"<br>Turtle init hilbert: 3 side: 4<br>"<br></span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 10pt serif">hilberts: n </span><span style="font: 10pt serif">| i s<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">[self penup; go: 128; pendn.<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">for⦂ i to: n do⦂<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">[s&larr; 256 lshift: 0-i.  self color: n-i*40; width: n-i+1.<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">self penup; go: 0-s/2; turn: ¬90; go: s/2; turn: 90; pendn.<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">self hilbert: i side: s; go: s; hilbert: i side: s; go: s]]<br>"<br>Turtle init erase hilberts: 5.<br><br>user displayoffwhile⦂<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">[PressTurtle new init: &rsquo;try2.press&rsquo;; hilberts: 4; close].<br>"</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 10pt serif">mandala: npoints diameter: d </span><span style="font: 10pt serif">| l points i j<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">[l&larr; (3.14*d/npoints) asInteger.<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">self home; penup; turn: ¬90; go: d/2; turn: 90; go: 0-l/2.<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">points&larr; Vector new: npoints.<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">for⦂ i to: npoints do⦂<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">[points◦i&larr; self place.<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">self go: l; turn: 360/npoints].<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">self pendn.<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">for⦂ i from: npoints/2 to: 1 by: ¬1 do⦂<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">[self color: (npoints/2)-i*20\250.<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">for⦂ j to: npoints do⦂<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">[self place: points◦j; goto: points◦(j+i-1\npoints+1)]]]<br>"<br>Turtle init mandala: 30 diameter: 400<br><br>user displayoffwhile⦂<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">[PressTurtle new init: &rsquo;try.press&rsquo;; mandala: 30 diameter: 500; close.]<br>"</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 10pt serif">spiral: n angle: a </span><span style="font: 10pt serif">| i<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">[for⦂ i to: n do⦂<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">[self color: i*2\256; go: i; turn: a]]<br>"<br> Turtle init spiral: 200 angle: 89; home; spiral: 200 angle: ¬89.<br><br> user displayoffwhile⦂ [(PressTurtle new init: &rsquo;try.press&rsquo;)<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">spiral: 403 angle: 89;<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span style="font: 10pt serif">home; spiral: 403 angle: ¬89; close.]<br> "</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: 10pt serif"></span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: 10pt serif">SystemOrganization classify: ↪Turtle under: &rsquo;Graphical Objects&rsquo;.</span></div>
<div style="width: 141pt; margin-left: 425pt; margin-top: 0pt; text-align: left">
<span style="font: bold 12pt serif"><br>"PressTurtle"</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 12pt serif">Class new title: &rsquo;PressTurtle&rsquo;<br></span><span class="tab" val="79"></span><span style="font: bold 12pt serif">subclassof: Turtle<br></span><span class="tab" val="79"></span><span style="font: bold 12pt serif">fields: &rsquo;file fplace fdir filling&rsquo;<br></span><span class="tab" val="79"></span><span style="font: bold 12pt serif">declare: &rsquo;&rsquo;;<br></span><span class="tab" val="79"></span><span style="font: bold 12pt serif">asFollows</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: italic 10pt serif"><br>I work with Pressfile to print high resolution pictures.<br>All inputs can be floating point for high resolution.<br>Complexity is limited to about 2k lines until multiple entity lists</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 12pt serif"><br>Initialization</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 10pt serif">close </span><span style="font: 10pt serif">[file page. file close]</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 10pt serif">init: name <br></span><span class="tab" val="79"></span><span style="font: 10pt serif">[file &larr; (dp0 pressfile: name).<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">filling&larr; false.<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">file pictureinit. self black.<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">super init]</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 10pt serif">initwithfile: name <br></span><span class="tab" val="79"></span><span style="font: 10pt serif">[file &larr; name.<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">filling&larr; false.<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">self black.<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">super init]</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 12pt serif"><br>Pen Control</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 10pt serif">black <br></span><span class="tab" val="79"></span><span style="font: 10pt serif">[file brightness: 0. super black]</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 10pt serif">blue </span><span style="font: 10pt serif">[self color: 160]</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 10pt serif">color: h </span><span style="font: 10pt serif">[file hue: h; brightness: 255; saturation: 255]</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 10pt serif">cyan </span><span style="font: 10pt serif">[self color: 120]</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 10pt serif">green </span><span style="font: 10pt serif">[self color: 80]</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 10pt serif">magenta </span><span style="font: 10pt serif">[self color: 200]</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 10pt serif">place </span><span style="font: 10pt serif">[⇑fplace]</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 10pt serif">red </span><span style="font: 10pt serif">[self color: 0]</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 10pt serif">up </span><span style="font: 10pt serif">[dir&larr; 270. fdir&larr; 270.0]</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 10pt serif">white <br></span><span class="tab" val="79"></span><span style="font: 10pt serif">[file brightness: 255.<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">file saturation: 0.<br></span><span class="tab" val="79"></span><span style="font: 10pt serif">super white]</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: bold 10pt serif">yellow </span><span style="font: 10pt serif">